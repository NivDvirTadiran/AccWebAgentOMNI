<acc-omni-page (togglePhone)="sidenav.toggle()"></acc-omni-page>
<!--sb-chat #chat
    (onMessageReady)="this.sendChatMes($event)" >
</sb-chat-->
<!-- Sidebar navigation -->
<mdb-sidenav #sidenav class="" style="transform: translateX(0%);"  >



    <links>
        <li *ngIf="false">
            <ul class=" row " style="text-align: center;margin: 0">
                <li class="col icons-sm" style="font-size:11px"><mdb-card-text>1 of 3</mdb-card-text></li>
                <li class="col icons-sm" style="font-size:11px"><mdb-card-text>2 of 3</mdb-card-text></li>
                <li class="col icons-sm" style="font-size:11px"><mdb-card-text>3 of 3</mdb-card-text></li>
            </ul>
        </li>
        <!--Social-->
        <li >
            <ul class="social" style="margin-bottom: 0;">
                <li><a  style="height: 10px" class="icons-sm fb-ic"><mdb-icon fab class="fa"  icon="facebook-f"> </mdb-icon></a></li>
                <li><a style="height: 10px" class="icons-sm pin-ic"><mdb-icon fab class="fa" icon="pinterest"> </mdb-icon></a></li>
                <li><a style="height: 10px"  class="icons-sm gplus-ic"><mdb-icon fab class="fa" icon="google-plus"> </mdb-icon></a></li>
                <li><a style="height: 10px"  class="icons-sm tw-ic"><mdb-icon fab class="fa" icon="twitter"> </mdb-icon></a></li>
            </ul>
        </li>
        <!--/Social-->
    </links>

    <mdb-navbar-brand>
        <div class="container" style="margin-right: 5px;margin-left: 5px;">
            <div class="row" style="text-align: center;margin-right: 0;margin-left: 0;">
                <!-- ----- current agent status  ----------- -->
                <li class="col-2"  style="display: flex;padding: 0;justify-content: center;align-items: center;">
                    <a class="icon-md fa-3x" style="padding-top: 5px;padding-right: 0;padding-bottom: 0;padding-left: 0;color: #07185a;">
                        <mdb-icon fab icon="user"  class="fa advance" style="font-size: xxx-large"> </mdb-icon></a>
                </li>

                <li class="col-6" style="align-content: center">

                    <mdb-card-title *ngIf="AAC.NoConnectionToAcc != true && AAC.CurrentAgentStatus.length < 17"
                        class="d-flex justify-content-center align-items-center h-100" style="font-size: 150%;align-self: center;">
                        {{AAC.CurrentAgentStatus | translate}}
                    </mdb-card-title>
                    <mdb-card-header *ngIf="AAC.NoConnectionToAcc != true && AAC.CurrentAgentStatus.length >= 17"
                          style="font-size: 120%;align-self: center;">
                                {{AAC.CurrentAgentStatus | translate}}
                    </mdb-card-header>
                </li>
                <!-------/. current agent status  ----------- -->
                <!-- Logo -->
                <div class="col-4" style="display: flex;padding: 5px;width: 100%;height: 70%;top: 5px;">
                    <img
                            src="assets/images/Aoenix-Contact-Center.webp"
                            class="img-responsive"
                            alt="..."
                    />
                </div>
                <!--/. Logo -->
            </div>
        </div>
    </mdb-navbar-brand>

    <links *ngIf=false>


        <!--Search Form-->
        <li class="fa" >
            <form class="fa-search" style="color: black" role="search">
                <div fab class="form-group md-form mt-0 pt-1" mdbWavesEffect >
                    <input type="text" class="form-control" placeholder="Search">
                </div>
            </form>
        </li>
        <!--/.Search Form-->

        <!-- Side navigation links -->
        <li>
            <ul class="collapsible collapsible-accordion">

                <mdb-accordion [multiple]="true" aria-multiselectable="false">

                    <!-- Collapsible link -->
                    <mdb-accordion-item>
                        <mdb-accordion-item-head mdbWavesEffect><mdb-icon fas icon="chevron-right"></mdb-icon> Collapsible menu
                        </mdb-accordion-item-head>
                        <mdb-accordion-item-body>
                            <ul>
                                <li><a href="#" mdbWavesEffect>Link 1</a></li>
                                <li>
                                    <!-- Collapsible link -->
                                    <mdb-accordion-item>
                                        <mdb-accordion-item-head mdbWavesEffect><mdb-icon fas icon="chevron-right"></mdb-icon> Collapsible menu
                                        </mdb-accordion-item-head>
                                        <mdb-accordion-item-body>
                                            <ul>
                                                <li><a href="#" mdbWavesEffect>Nested Link 1</a></li>
                                                <li><a href="#" mdbWavesEffect>Nested Link 2</a></li>
                                            </ul>
                                        </mdb-accordion-item-body>
                                    </mdb-accordion-item>
                                </li>
                                <li><a href="#" mdbWavesEffect>Link 2</a></li>
                            </ul>
                        </mdb-accordion-item-body>
                    </mdb-accordion-item>

                    <!-- Simple link -->
                    <mdb-accordion-item class="no-collase">
                        <mdb-accordion-item-head mdbWavesEffect><mdb-icon far icon="hand-pointer"></mdb-icon> Simple link
                        </mdb-accordion-item-head>
                        <mdb-accordion-item-body></mdb-accordion-item-body>
                    </mdb-accordion-item>

                    <!-- Collapsible link -->
                    <mdb-accordion-item>
                        <mdb-accordion-item-head mdbWavesEffect><mdb-icon far icon="eye"></mdb-icon> Collapsible menu 2
                        </mdb-accordion-item-head>
                        <mdb-accordion-item-body>
                            <ul>
                                <li><a href="#" mdbWavesEffect>Link 1</a></li>
                                <li><a href="#" mdbWavesEffect>Link 2</a></li>
                            </ul>
                        </mdb-accordion-item-body>
                    </mdb-accordion-item>

                    <!-- Simple link -->
                    <mdb-accordion-item class="no-collase">
                        <mdb-accordion-item-head mdbWavesEffect><mdb-icon far icon="gem"></mdb-icon> Simple link 2</mdb-accordion-item-head>
                        <mdb-accordion-item-body></mdb-accordion-item-body>
                    </mdb-accordion-item>

                </mdb-accordion>
            </ul>
        </li>
        <!--/. Side navigation links -->
    </links>

    <status-board #statusboard
                  [AAC]=this.AAC
                  (onAnswerCall)="this.answerCall()"
                  (onDisconnectCall)="this.disconnectCall()" >
    </status-board>


    <hr class="hr hr-blurry"/>


    <!--(4)  ======================Agent tool bar icons ==================-->
    <buttons-board #buttonsboard
            [(tiles)]="this.tiles"
            [(userStatus)]="this.userStatus"
            [mainPage]="this">
    </buttons-board>


    <hr class="hr hr-blurry"/>

    <links  *ngIf=true >
        <!--Advance-->
        <div>
            <ul class="social" style="margin-bottom: 0">
                <li [menuPopover]="this.popover" [bubbleOn]="true" [AAC]="AAC" (actionButton)="toggleToGrids(value.valueOf())" >
                    <a class="icons-sm"><mdb-icon icon="table" class="fa advance"> </mdb-icon></a>
                </li>
                <li><a class="icons-sm"><mdb-icon icon="question" class="fa advance"> </mdb-icon></a></li>
                <li><a class="icons-sm"><mdb-icon icon="book" class="fa advance"> </mdb-icon></a></li>
                <li><a class="icons-md"><mdb-icon icon="times-circle" class="fa advance"> </mdb-icon></a></li>
            </ul>
        </div>
        <!--/Advance-->
    </links>

    <mdb-navbar>

        <div>
            <mat-grid-list [cols]="footercol" rowHeight="40px">
                <mat-grid-tile title="{{'Windows' | translate}}">
                    <button  mat-button class="fa fa-table footer_img" [matMenuTriggerFor]="menu"
                            style="color: #07185a; background-color: #f1f1f1">
                    </button>
                    <mat-menu #menu="matMenu" class="mat-menu-panel">
                        <button *ngIf="AAC.enableCallStatusWin" mat-menu-item
                                (click)='toggleToGrids(0)'>{{'Calls Status' | translate}}</button>
                        <button *ngIf="AAC.enableCallLogWin" mat-menu-item
                                (click)='toggleToGrids(1)'>{{'Calls Log' | translate}}</button>
                        <button *ngIf="AAC.enableCallQWin" mat-menu-item
                                (click)='toggleToGrids(2)'>{{'ACD Calls' | translate}}</button>
                        <button *ngIf="AAC.enableTelephonyWin" mat-menu-item
                                (click)='toggleToGrids(3)'>{{'Telephony' | translate}}</button>
                        <button *ngIf="AAC.enablePhonebookWin" mat-menu-item
                                (click)='toggleToGrids(4)'>{{'Phonebook' | translate}}</button>
                        <button *ngIf="AAC.enableSetupWin" mat-menu-item
                                (click)='toggleToGrids(5)'>{{'Setup' | translate}}</button>
                        <button *ngIf="AAC.enablePhonebookWin" mat-menu-item
                                (click)='toggleToGrids(6)'>{{'Personal Statistics' | translate}}</button>

                    </mat-menu>
                </mat-grid-tile>
                <mat-grid-tile title="{{'About' | translate}}">
                    <button mat-button [style.background-color]="about_color == true ? '#f1f1f1' : '#f1f1f1'"
                            (click)="AAC.About()">
                        <i class="fa fa-question footer_img" style="color: #07185a" ></i>
                    </button>
                </mat-grid-tile>
                <mat-grid-tile title="{{'Help' | translate}}">
                    <button mat-button style="background-color: #f1f1f1" (click)="AAC.Help('main_help.htm')">
                        <i class="fa fa-book footer_img" style="color: #07185a"></i>
                    </button>
                </mat-grid-tile>
                <mat-grid-tile title="{{'Close all and Exit' | translate}}">
                    <button  mat-button style="background-color: #f1f1f1" (click)="AAC.agentLogoff(true,false)">
                        <i title="{{'close' | translate}}" fas class="fa fa-times-circle footer_img" style="color: #07185a"></i>
                    </button>
                </mat-grid-tile>
            </mat-grid-list>

            <div *ngIf="isTrash" style="margin-left: 35%; width:70px"
                 (dragover)="this.buttonsboard.imgDragOver(-999,$event)"
                 (drop)="this.buttonsboard.imgDrop(-999,$event)">
                <div fxLayout="col" fxLayoutAlign="center center">
                    <button mat-button style="background-color: #f1f1f1">
                        <i aria-hidden=true style="background-color:#bbb;font-size: 130%" class="fa fa-trash"></i>
                    </button>
                </div>
                <div fxLayout="col" fxLayoutAlign="center center" style="background-color: #f1f1f1;font-size: 80%">
                    {{'Remove' | translate}}</div>
            </div>
        </div>
        <!--(9) ================== personal statistics =======================-->
        <div *ngIf="AAC.ShowPST">
            <div
                    style="line-height: 18px; font-size: 14px; position: sticky;width: 100%;background-color: honeydew;text-align: left">
                <span title="{{AAC.LastPersonalDate}}" ><b>{{'Personal Statistics' | translate}}</b></span>
                <span style='float: right; cursor: pointer;'> &nbsp;
                        <i title="{{'Calls' | translate}}" (click)="showDetailedACDbyGroups()" class='fa fa-list-ul'>
                            &nbsp;&nbsp;</i>
                        <i title="{{'Queued Calls' | translate}}" (click)="showDetailedQACDbyGroups()" class='fa fa-bars'>
                            &nbsp;&nbsp;</i>
                        <i title="{{'refresh' | translate}}" (click)="AAC.sendStatisticsRequest()" class='fa fa-repeat'>
                            &nbsp;&nbsp;</i>
                        <i title="{{'close' | translate}}" (click)="toggleToGrids(6)" class='fa fa-times'></i>
                    </span>
            </div>
            <div style='font-size:10px'>
                <span>{{'Login time:' | translate}}&nbsp;{{AAC.PSWtot.loginTime}}&nbsp;&nbsp;</span>
                <span>{{'Release time:' | translate}}&nbsp;{{AAC.PSWtot.releaseTime}}</span>
            </div>
            <table id='presnalStat'>
                <tr>
                    <th>#</th>
                    <th>{{'In'  | translate}}</th>
                    <th>{{'Average' | translate}}</th>
                    <th>{{'Out' | translate}}</th>
                    <th>{{'Average' | translate}}</th>
                </tr>
                <tr style="cursor: pointer">
                    <td>ACD</td>
                    <td>{{AAC.PSWtot.totACD}}</td>
                    <td>{{AAC.PSWtot.totACDTime}}</td>
                    <td>{{AAC.PSWtot.totOACD}}</td>
                    <td>{{AAC.PSWtot.totOACDTime}}</td>
                </tr>
                <tr>
                    <td>{{'external' | translate}}</td>
                    <td>{{AAC.PSWtot.external_incoming_calls}}</td>
                    <td>{{AAC.PSWtot.total_talk_time_of_ext_inc_calls}}</td>
                    <td>{{AAC.PSWtot.external_outgoing_calls}}</td>
                    <td>{{AAC.PSWtot.total_talk_time_of_ext_out_calls}}</td>
                </tr>
                <tr>
                    <td>{{'internal' | translate}}</td>
                    <td>{{AAC.PSWtot.internal_incoming_calls}}</td>
                    <td>{{AAC.PSWtot.total_talk_time_of_int_inc_calls}}</td>
                    <td>{{AAC.PSWtot.internal_outgoing_calls}}</td>
                    <td>{{AAC.PSWtot.total_talk_time_of_out_inc_calls}}</td>
                </tr>
            </table>
        </div>
        <br>
        <!-- ACD groups table-->
        <div *ngIf="AAC.ShowPSTGROUPS"
             style="height: 18px; font-size: 14px ;width: 100%;background-color: white;text-align: center">
            <span><b>{{'ACD groups' | translate}}</b></span>
            <span style='float: right; cursor: pointer;'> &nbsp;
                    <i title="{{'close' | translate}}" (click)="ClosePSTGROUPS()" class='fa fa-times'></i>
                </span>
            <table class="tableSection" id="myTable" style="background-color:white;">
                <!-- <thead> -->
                <tr>
                    <th style="cursor: pointer;" (click)="sortTable(0,'myTable')">{{'Group'    | translate}}</th>
                    <th style="cursor: pointer;" (click)="sortTable(1,'myTable')">{{'In'  | translate}}</th>
                    <th style="cursor: pointer;" (click)="sortTable(2,'myTable')">{{'Average' | translate}}</th>
                    <th style="cursor: pointer;" (click)="sortTable(3,'myTable')">{{'Out' | translate}}</th>
                    <th style="cursor: pointer;" (click)="sortTable(4,'myTable')">{{'Average' | translate}}</th>
                </tr>
                <!-- </thead> -->
                <!-- <tbody> -->
                <tr *ngFor="let row of AAC.PSWtot.ACDGroups">
                    <td *ngFor="let col of pst_cols">{{row[col.field]}}</td>
                </tr>
                <!-- </tbody> -->
            </table>
        </div>
        <!-- QUEUED ACD groups table-->
        <div *ngIf="AAC.ShowPSTQGROUPS"
             style="height: 18px; font-size: 14px ;width: 100%;background-color: white;text-align: center">
            <span><b>{{'Queued ACD calls' | translate}}</b></span>
            <span style='float: right; cursor: pointer;'> &nbsp;
                    <i title="{{'ON/OFF Queued bar chart' | translate}}" (click)="showDetailedQChartsACDbyGroupsOnOff()" class='fa fa-bar-chart'>
                        &nbsp;&nbsp;</i>
                    <i title="{{'close' | translate}}" (click)="ClosePSTQGROUPS()" class='fa fa-times'></i>
                </span>
            <table  *ngIf="!ShowChart" class="tableSection" id="myQTable" style="background-color: white;">
                <!-- <thead> -->
                <tr>
                    <th style="cursor: pointer;" (click)="sortTable(0,'myQTable')">{{'Group'    | translate}}</th>
                    <th style="cursor: pointer;" (click)="sortTable(1,'myQTable')">{{'Total'  | translate}}</th>
                    <th style="cursor: pointer;" (click)="sortTable(2,'myQTable')">{{'Average' | translate}}</th>
                    <th style="cursor: pointer;" (click)="sortTable(3,'myQTable')">{{'Longest' | translate}}</th>
                </tr>
                <!-- </thead> -->
                <!-- <tbody> -->
                <tr *ngFor="let row of AAC.PSWQtot.ACDQGroups">
                    <td *ngFor="let col of pst_Qcols">{{row[col.field]}}</td>
                </tr>
                <!-- </tbody> -->
            </table>
            <div id="chartContainer" style="width: 100%"></div>
        </div>

        <!-- ============== (5) on/off numpad for make call, release code, wrapup codes,  ================-->
        <div *ngIf="AAC.ShowNumpad">
            <div style="position: absolute;width: 90%;background-color: white">
                <my_keyboard></my_keyboard>
            </div>
        </div>

        <!-- --------------------------on off release code select ------------------------- -->
        <div *ngIf="AAC.ShowReleaseCodes" style="position: sticky;width: fit-content;background-color: white;text-align: center">
                <span>
                    <mat-checkbox [(ngModel)]="AAC.SetReleaseCodesButton">Set Release Code button</mat-checkbox>
                    <i title="{{'close' | translate}}" style='float: right;' (click)="offGroupList()" class='fa  fa-times'></i>
                </span>
            <mat-form-field>
                <mat-select placeholder="{{'Release codes' |translate}}" [(ngModel)]="selectedRC" name="code"
                            (selectionChange)="RCchanged()">
                    <mat-option style="font-size:100%;;height:19px;">None</mat-option>
                    <mat-option *ngFor="let code of AAC.ACC.m_SelectRC" [value]="code.Key" style="font-size:100%;;height:19px;">
                        {{code.Desc}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <!-- -------------------- on off wrap code select --------------------------- -->
        <div *ngIf="AAC.ShowWrapupCodes" style="position: sticky;width: 100%;background-color: honeydew;text-align: center">
            <span>
                <mat-checkbox [(ngModel)]="AAC.SetWrapupCodesButton">Set Wrapup Code button</mat-checkbox>
                <i class="numberCircle" title="close" (click)="offGroupList()">&nbsp;&nbsp;X</i>
            </span>
            <mat-form-field>
                <mat-select placeholder="Wrap up codes" [(ngModel)]="selectedWC" name="code"
                            (selectionChange)="WCchanged()">
                    <mat-option style="font-size:100%;;height:19px;">None</mat-option>
                    <mat-option *ngFor="let code of AAC.ACC.m_WrapUpCodesList" [value]="code.Key" style="font-size:100%;;height:19px;">
                        {{code.Desc}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <!-- --------------------------on off transfer to agent ------------------------- -->
        <div *ngIf="AAC.ShowTransferToAgentList" style="position: sticky;width: fit-content;background-color: white;text-align: center">
                <span>
                    <mat-checkbox [(ngModel)]="AAC.SetTransferToAgentButton">{{'Set Transfer to Agent button' |translate}}</mat-checkbox>
                    <i title="{{'close' | translate}}" style='float: right;' (click)="offGroupList()" class='fa  fa-times'></i>
                </span>
            <mat-form-field>
                <mat-select placeholder="{{'Perform transfer to Agent' |translate}}" [(ngModel)]="selectedTtA" name="code"
                            (selectionChange)="TaACchanged($event)">
                    <mat-option style="font-size:100%;;height:19px;">None</mat-option>
                    <mat-option *ngFor="let code of AAC.agentsReadyList" style="font-size:100%;;height:19px;" [value]="code.name">
                        {{code.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <!-- --------------------------on group select login/logout one choise list -------------- -->
        <div *ngIf="AAC.ShowOneGroupsList" style="position: sticky;width: 100%;background-color: white;text-align: center">
                <span>
                    <mat-checkbox [(ngModel)]="AAC.SetOneGroupsListButton">Set Group button</mat-checkbox>
                    <i title="{{'close' | translate}}" style='float: right;' (click)=offGroupList() class='fa  fa-times'></i>
                </span>
            <mat-form-field>
                <mat-select placeholder="login/logout group" [(ngModel)]="selectedOneGroup"
                            (selectionChange)="SelctedOneGroup()">
                    <mat-option *ngFor="let group of AAC.ACC.m_GroupsList" [value]="group.Key"
                                style="font-size:100%;;height:19px;">
                        {{group.Desc}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <!-- ==================================== (6)popup windows ================-->
        <!-- ---------- son off groups manager list multiple choise list   #multipleGroupSelect (click)="openmultipleGroupSelect($event)"-->
        <div *ngIf="AAC.ShowGroupsList" style="position: sticky;width: 100%;background-color: white;text-align: center">

            <mat-form-field>
                <mat-select placeholder="Groups manager" [formControl]="groupsListCtrl" [multiple]="true"
                            (selectionChange)="SelctedGroupChange($event)">
                    <mat-option *ngFor="let group of AAC.ACC.m_GroupsList" [value]="group"
                                style="font-size:100%;;height:19px;">
                        {{group.Desc}}</mat-option>
                </mat-select>
            </mat-form-field>
            <i style='float: right;' (click)=offGroupList() class='fa  fa-times'></i>
        </div>
        <!-- --------------------------on  select ShowButtonList  -------------- -->
        <!-- ============== (7)bottom icons (exit,help,....) ================-->
        <!-- <footer class="footer"> -->
    </mdb-navbar>


    <!--mdb-card>
        <sb-chat #chat (onMessageReady)="sendChatMes($event)" theme='none' >
        </sb-chat>
    </mdb-card-->

</mdb-sidenav>
<!--/. Sidebar navigation -->

<a hidden mdbBtn (click)="sidenav.toggle()" color="primary" class="p-3 button-collapse"
    style="position: absolute; top: 5px;left: 48%;width: 10px;height: 10px;">

    <mdb-icon fas icon="bars"></mdb-icon>
</a>



        <!-- ============== (8) main form - grids =======================-->
    

    <!-- callsstat-->
    <div *ngIf="AAC.isGrids || true" class='OpenCallsBase' id="Grids">
        <div *ngIf="AAC.isOpenCalls">
         <!-- [ngStyle]="{'width': AAC.openCallTableLength}"> -->
            <open-calls></open-calls>
        </div>
        <!-- Calls in queue-->
       <div *ngIf="AAC.isACDCalls" >
        <acd-q-calls></acd-q-calls>
    </div>
         <!-- Call log-->
         <div *ngIf="AAC.isCallsLog" >
            <calls_log></calls_log>
        </div>
         <div *ngIf="AAC.isTelephony" class='mat-elevation-z8'>
            <div style='height:30px; background:lightblue;text-align: center'>
                <span style='float: left;width:20px;color:lightslategrey' title="{{'Help Telephony' | translate}}" 
                    (click)="AAC.Help('telephony_window.htm')"class='fa  fa-book'>
                </span>
               <span>{{'Telephony' | translate}}</span>
                 <span style='float: right;' (click)=AAC.closeWindow(3) class='fa  fa-times'></span>
            </div>
            <app-telephony></app-telephony>
        </div>
        <!-- phonbook-->
        <div *ngIf="AAC.isPhonbook" class='mat-elevation-z8'>
            <div style='height:30px; background:lightblue;text-align: center'>
                <span style='float: left;width:20px;color:lightslategrey' title="{{'Help Phonebook' | translate}}" 
                    (click)="AAC.Help('phonebook_window.htm')"class='fa  fa-book'>
                </span>
                <span>{{'Phonebook' | translate}}</span>
                <span style='float: right;' (click)=AAC.closeWindow(4) class='fa  fa-times'></span>
            </div>
            <phone_book></phone_book>
        </div><!-- setup-->
        <div *ngIf="AAC.isSetup" class='mat-elevation-z8' style="width:750px;height:80%">
            <div style='height:30px; background:lightblue;text-align: center'>
                <span style='float: left;width:20px;color:lightslategrey' title="{{'Help Setup' | translate}}" 
                (click)="AAC.Help('setup_window.htm')"class='fa  fa-book'>
            </span>
            <span>{{'Setup' | translate}}</span>
                <span style='float: right;' (click)=AAC.closeWindow(5) class='fa  fa-times'></span>
            </div>
            <acc-setup></acc-setup>
        </div>
    </div>
