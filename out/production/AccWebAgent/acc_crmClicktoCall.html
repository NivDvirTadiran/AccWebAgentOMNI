<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
  $(document).ready(function () {
    $("button").click(function () {
	  // click to call format:
	  // sessionid: some unique nimber
	  // direction: can be 'click2call' and it written the log in acc server
	  // agentNo: ageget number, must be logon
	  // action: 'makecall'
	  // params: 
	  //  1. makecall,
	  //  2. 000 constant,
	  //  3. agent number,
	  //  4. agent exension number,
	  //  5. click to call number
	  
      var obj = { sessionid: "1358200701113", direction: "click2call", agentNo: "1001", action: "makecall", params: "makecall,000,1001,2001,2002," };
      obj.params = 'makecall,000,' + agentNo.value + ',' + Extension.value + ',' + TelNo.value + ',';
      obj.agentNo = agentNo.value;
      var objStr = JSON.stringify(obj);
      var parsedUrl =   new URL(window.location.href);
        var ip = parsedUrl.hostname;
        var port = parsedUrl.port;
        var protocol = parsedUrl.protocol;
        var localurl = protocol + "//" + ip + ":" + port + '/accAgent/agentrequest';
 

      console.log(objStr);
      $.ajax({

        url:  localurl,//'https://172.28.1.177:8445/accAgent/agentrequest', // your api url
        method: 'PUT', // method is any HTTP method
        dataType: 'json',
        data: objStr,
        beforeSend: function (xhr) { xhr.setRequestHeader('Content-Type', ' application/json') },
        success: function (result) {
          alert("success?");
        }
      });
    });
  });
</script>

</head>
<body>
  <br><br>
  <label for="agentNo">Agent No: </label>
  <input type="text" id="agentNo" name="agentNo">
  <br><br>
  <label for="Extension">Extension: </label>
  <input type="text" id="Extension" name="Extension">
  <br><br>
  <label for="TelNo">To Tel No: </label>
  <input type="text" id="TelNo" name="TelNo">
  <br><br>
  <button>Send Click to call request acc server</button>
</body>
</html>
